- name: ðŸ§ª Ejecutar prueba de HTML
  id: tidy
  shell: bash
  run: |
    # Busca todos los archivos .html y los pasa uno a uno a tidy
    find . -type f -name "*.html" > html_files.txt

    # Crea o vacÃ­a el archivo de errores
    > tidy_errors.txt

    # Procesa cada archivo
    while IFS= read -r file; do
      echo "ðŸ” Validando: $file"
      tidy -e "$file" 2>> tidy_errors.txt
    done < html_files.txt

    if [[ -s tidy_errors.txt ]]; then
      echo "âŒ Hay problemas en el test HTML:"
      cat tidy_errors.txt
      echo "::error title=Hay problemas en el test HTML::Revisa las etiquetas mencionadas."
      exit 1
    else
      echo "âœ… Todo OK â€“â€¯sin errores de marcado"
    fi
